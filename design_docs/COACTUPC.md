# 詳細設計書: COACTUPC (Account Update)

## 1. 処理概要
既存のアカウント情報を更新する。住所、ステータス、リミット設定等の変更を受け付け、バリデーション後に VSAM ファイルを更新する。

## 2. 入出力定義
- **画面 (BMS):** `COACTUP` (Mapset), `CACTUPA` (Map)
- **ファイル (VSAM):** `ACCTDAT` (更新用), `CUSTDAT` (参照用)

## 3. 処理フロー
1. **照会フェーズ:** 更新対象のアカウントを表示。
2. **編集フェーズ:** 画面入力値のバリデーション（型チェック、範囲チェック）。
3. **更新実行:**
    - `EXEC CICS READ UPDATE`: 排他制御のため `UPDATE` オプション付きで読み込み。
    - 画面項目をレコード構造へ転記。
    - `EXEC CICS REWRITE`: ファイルを書き換え。
4. **結果表示:** 更新成功またはエラーメッセージを表示。

## 4. データベース操作
- `EXEC CICS READ UPDATE RIDFLD(...)`: 更新用ロック取得。
- `EXEC CICS REWRITE`: 更新実行。

## 5. 移行への考慮事項
- **楽観的/悲観的ロック:** メインフレームの `READ UPDATE` は悲観的ロックに近い。モダンな Web アプリでは `version` カラム等を用いた楽観的ロックへの移行を検討。
